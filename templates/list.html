<div class="container">
    <div class="row">
        <div class="col-sm-6">
            <h1>Список абитуриентов</h1>
        </div>
        <div class="col-sm-6">
            <form class="form-inline search-form" action="index.php" method="GET">
                <div class="form-group">
                    <label class=" control-label">Поиск</label>
                    <div class="input-group ">        
                        <input type="text" class="form-control" name="search" <?php if (isset($curl['search'])): ?>value="<?= $curl['search']; ?>"<?php endif; ?>/>
                        <span class="input-group-btn">
                            <button type="submit" class="btn btn-default"/>Найти</button>
                        </span>
                    </div>
                </div>
            </form>            
        </div>
    </div>    
    <?php if (isset($curl['search'])): ?>
        <div class="alert alert-info" role="alert">
            <p>Показаны только абитуриенты, найденные по запросу «<?= $curl['search']; ?>».</p>
            <p><a class="alert-link" href="<?php echo app\LinkHelper::getFirstPageLink(); ?>">Показать всех абитуриентов</a></p>
        </div>
    <?php endif; ?>
    

    
    <table class="table">
        <thead>
            <tr>
                <th><a href="<?= app\ViewHelper::html(app\LinkHelper::getSortingLink($curl, 'name')); ?>">Имя <?= app\LinkHelper::getOrderIcon($curl, 'name'); ?></a></th>
                <th><a href="<?= app\ViewHelper::html(app\LinkHelper::getSortingLink($curl, 'lastName')); ?>">Фамилия <?= app\LinkHelper::getOrderIcon($curl, 'lastName'); ?></a></th>
                <th><a href="<?= app\ViewHelper::html(app\LinkHelper::getSortingLink($curl, 'groupNum')); ?>">Номер группы <?= app\LinkHelper::getOrderIcon($curl, 'groupNum'); ?></a></th>
                <th><a href="<?= app\ViewHelper::html(app\LinkHelper::getSortingLink($curl, 'egePoints')); ?>">Баллы ЕГЭ <?= app\LinkHelper::getOrderIcon($curl, 'egePoints'); ?></a></th>
            </tr>
        </thead>
        <?php if (isset($studentsValues) && is_array($studentsValues)):
            foreach($studentsValues as $values): ?>
        <tbody>
            <tr>
               <?php foreach($values as $value): ?>
                <td>
                    <?php if(isset($curl['search'])): ?>
                        <?= app\ViewHelper::highlightSymbols(app\ViewHelper::html($value), $curl['search'], "<strong></strong>"); ?>                    
                    <?php else: ?>
                        <?= app\ViewHelper::html($value); ?>
                    <?php endif; ?>
                </td>
                <?php endforeach; ?>
            </tr>
        </tbody>
            <?php endforeach;
            endif; ?>        
    </table>
    <?php if ($totalPages>1): ?>
        <?php if (!isset($curl['page'])): $curl['page'] = 1; endif; ?>
        <label>Страницы:</label>
        <nav aria-label="Page navigation">    
          <ul class="pagination my-pagination">
            <?php for ($i=1; $i<=$totalPages; $i++):
                if ($i==$curl['page']): ?>
                    <li class='active'><a href="<?= app\ViewHelper::html(app\LinkHelper::getPageLink($i, $curl)); ?>"><?= $curl['page']; ?></a></li>
                <?php else: ?>
                    <li><a href="<?= app\ViewHelper::html(app\LinkHelper::getPageLink($i, $curl)); ?>"><?= $i; ?></a></li>
                <?php endif;
            endfor; ?>
          </ul>
        </nav>
    <?php endif; ?>
</div>